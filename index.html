---
layout: default
---

<!-- Tabs for Section Navigation -->
<ul class="tabs">
  <li><a href="#" data-tab="social-cultural">Social/Cultural</a></li>
  <li><a href="#" data-tab="domestic">Domestic Affairs</a></li>
  <li><a href="#" data-tab="foreign-affairs">Foreign Affairs</a></li>
</ul>

<!-- Social/Cultural Section -->
<div id="social-cultural" class="tab-content">
  <h2>Social/Cultural</h2>
  <div id="socialPosts"></div>
</div>

<!-- Domestic Affairs Section -->
<div id="domestic" class="tab-content" style="display: none;">
  <h2>Domestic Affairs</h2>
  <div id="domesticPosts"></div>
</div>

<!-- Foreign Affairs Section -->
<div id="foreign-affairs" class="tab-content" style="display: none;">
  <h2>Foreign Affairs</h2>
  <div id="foreignPosts"></div>
</div>

<!-- Add a form for users to submit new posts -->
<div class="post-form">
  <h2>Add a New Post</h2>
  <form id="postForm">
    <input type="text" id="title" placeholder="Post Title" required />
    <textarea id="content" placeholder="Post Content" required></textarea>
    <select id="category">
      <option value="social-cultural">Social/Cultural</option>
      <option value="domestic">Domestic Affairs</option>
      <option value="foreign-affairs">Foreign Affairs</option>
    </select>
    <button type="submit">Submit Post</button>
  </form>
</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDdvPz4MqhcaR5AxqflgIy7EE4jRvzNn5E",
    authDomain: "perceptos-website.firebaseapp.com",
    projectId: "perceptos-website",
    storageBucket: "perceptos-website.appspot.com",
    messagingSenderId: "348493325500",
    appId: "1:348493325500:web:77089e867aa9f256d3dcb9",
    measurementId: "G-88LHK6VWD7"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  firebase.analytics();

  // Function to add a new post to Firestore
  async function addPost(title, content, category) {
    try {
      await db.collection('posts').add({
        title: title,
        content: content,
        category: category, // Save the category with the post
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      console.log('Post added successfully!');
      displayPosts(); // Refresh posts after adding
    } catch (error) {
      console.error('Error adding post: ', error);
    }
  }

  // Function to display posts from Firestore
  async function displayPosts() {
    const socialPosts = document.getElementById('socialPosts');
    const domesticPosts = document.getElementById('domesticPosts');
    const foreignPosts = document.getElementById('foreignPosts');

    // Clear containers before appending new posts
    socialPosts.innerHTML = '';
    domesticPosts.innerHTML = '';
    foreignPosts.innerHTML = '';

    try {
      const querySnapshot = await db.collection('posts').orderBy('timestamp', 'desc').get();
      querySnapshot.forEach((doc) => {
        const post = doc.data();
        const postHTML = `<div class="post"><h2>${post.title}</h2><p>${post.content}</p></div>`;

        if (post.category === 'social-cultural') {
          socialPosts.innerHTML += postHTML;
        } else if (post.category === 'domestic') {
          domesticPosts.innerHTML += postHTML;
        } else if (post.category === 'foreign-affairs') {
          foreignPosts.innerHTML += postHTML;
        }
      });
    } catch (error) {
      console.error('Error fetching posts: ', error);
    }
  }

  // Function to handle tab switching
  document.querySelectorAll('.tabs a').forEach(tab => {
    tab.addEventListener('click', (e) => {
      e.preventDefault();

      const selectedTab = e.target.getAttribute('data-tab');
      // Hide all tab contents
      document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
      // Show the selected tab's content
      document.getElementById(selectedTab).style.display = 'block';
    });
  });

  // Form submission handling
  document.getElementById('postForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const title = document.getElementById('title').value;
    const content = document.getElementById('content').value;
    const category = document.getElementById('category').value; // Get category
    await addPost(title, content, category);

    // Clear form fields
    document.getElementById('title').value = '';
    document.getElementById('content').value = '';
  });

  // Display posts on page load
  displayPosts();
</script>

